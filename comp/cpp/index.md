[トップ](../../) > [競技プログラミング](../) > C++(競プロ用)

# C++(競プロ用)

## C++とは

実行速度が速く、競プロにおいて主に用いられる言語です。ここではC++の細かい機能については説明せず、競プロに使う機能に焦点を当てて解説します。

## 学習の進め方

変数・関数の概念や`if`、`for`、`while`などのループは他の言語で触ったことがあるものとします。

C++は比較的古い言語であり、使い方によってはパソコンの処理の進み方やメモリの仕組みを考える必要があります。他の言語では考えなくてよいことを真面目に考えないといけないので、少し身構えておいてください。

また、競技プログラミングの大会を行なっているAtCoder社が[APG4b](https://atcoder.jp/contests/APG4b)と呼ばれる解説記事を公開しています。ぜひ活用してください。

## 目標

この章では、他の(得意な)言語で書けることをC++でも書けるようになり、ABC(後述)のA問題程度を解けるようになることを目標にします。

C++の環境構築は少し大変ですが、頑張ってください。

## 環境構築

まずは、C++のコードを実行ファイル(.exeなどをイメージしてください)に変換する「コンパイラ」をインストールします。と言いたいところですが、C++は主にLinux上で利用されるので、WindowsにLinuxをインストールするところから始めます。

### Linuxのインストール(WSL利用)

Linuxとは何かの説明はここでは行いません。競プロでの利用に限れば、いわゆる「黒い画面」のことだという認識でもそこまで混乱することはないでしょう。

> WindowsにLinuxをインストール、と聞いて、コンピュータに詳しい人ならばデュアルブートや仮想環境を想像するかもしれませんが、ここではWSL(Windows Subsystem for Linux)を利用します。仮想環境を持っている人はそれを利用しても構いません。

*Macを使っている方はこの作業は必要ありません。「コンパイラのインストール(mac)」へ進んでください。*

まず管理者権限でコマンドプロンプトを開いてください。Windowsの検索メニューに`cmd`と入力→「管理者権限で開く」です。黒い画面が開くと思いますが、そこに`wsl --install`と入力してください。さまざまな設定やダウンロードが行われ、再起動を促されます。指示に従って再起動してください。

もしかしたらユーザーネームなどを決めるように言われるかもしれません。これはWindowsのものと一致しなくても大丈夫ですが、できるだけ英語の小文字のみ、スペースなしで作成することをお勧めします。ユーザー名やパスワードは忘れないようにしてください。

これでWSLがインストールされ、Linuxが使えるようになりました。コマンドプロンプト(管理者権限でなくてもよい)で`wsl`と入力し、`xxx@xxx:~$`のような表示になっていることを確認してください。(元の画面に戻るには`exit`と入力です)

### コンパイラのインストール(Windows)

まずLinuxに入ります。コマンドプロンプトで`wsl`を入力してください。

Linuxでは、アプリケーションのインストールもコマンドライン(黒い画面)上で行います。下記のコードを1行ずつ入力してください。

```bash
sudo apt update
sudo apt install -y build-essential
```

処理が完了したら、Linux上で`g++ --version`を実行してください。バージョン情報や著作権情報のようなものが表示されたら成功です。

### コンパイラのインストール(mac)

macは源流がLinuxと似ているため、Linuxをインストールする必要はありません。

macには最初からg++がインストールされています。ただし、これはg++という名前をしていますが、Clangという別のコンパイラの名前が変わっているだけなのです(ややこしいですね...)。

試しに、ターミナルを開いて`g++ --version`と入力してください。1行目にClangという文字列が含まれていたら、それは「g++のフリをしたClang」です。これから作成するコードはg++でしか動かないので、別途g++をインストールします。

macでは、このようなターミナル上で動くソフト(CLIよとばれます)をインストールするのにHomeBrewと呼ばれるアプリを使うことが多いです。ターミナルで`/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"`と入力し、指示に従ってインストールしてください。

次にg++のインストールです。`brew install g++`でインストールできますが、`g++-12`などという名前で保存されてしまいます。`g++`だけで呼び出せるようにするために、`sudo ln -sf $(ls -d $(brew --prefix)/bin/* | grep "/g++-" | sort -r | head -n1) /usr/local/bin/g++`を実行してください。ターミナルを再起動して`g++ --version`を入力すれば、Clangではなくg++になっているはずです。

### エディタのインストール

さて、コンパイラは入ったので次はコードエディタです。特にこだわりがなければVSCodeを使います。VSCodeのインストールはここでは解説しません。

VSCodeからLinux(WSL)に接続できるようにします。[Remote Development](vscode:extension/ms-vscode-remote.vscode-remote-extensionpack)をダウンロードしてください。

WSL上で`code .`と入力して、VSCodeが開くことを確認してください。

C++系の拡張機能も入れておきましょう。[C/C++](vscode:extension/ms-vscode.cpptools)、[C/C++ Extension Pack](vscode:extension/ms-vscode.cpptools-extension-pack)、[C/C++ Themes](vscode:extension/ms-vscode.cpptools-themes)辺りを入れておけば大丈夫でしょう。

## C++でコードを書く

やっと環境構築が終わりました。

試しにコードを実行してみましょう。
好きな場所をVSCodeで開いてください。

> WindowsでWSLを入れた方は、画面の一番左下に「><」のようなボタンがあると思います。
そこに「WSL:〜」と表示されていない場合は、クリックして「WSLでフォルダーをもう一度開く」をクリックしてください。

そこに`test.cpp`(名前は任意)というファイルを作成し、下記の内容を書き込んでください。

```cpp
#include <bits/stdc++.h>

using namespace std;

int main() {
    // cout (出力口) に流し込む感覚
    // endlは改行
    cout << "Hello World" << endl;
}
```

これをコンパイルしてみます。VSCode下部のターミナルを利用すると便利です。×△と表示されている部分をクリックし、「ターミナル」を押すといつもの画面が出てきます。

`ls`や`cd`を使ってソースコードがある場所まで移動し、`g++ ./test.cpp`を実行してください。ソースコードと同じ場所に`a.out`というファイルができたと思います。これが「コンパイル」です。C++のファイルから実行ファイルが生成されました。

> macの人で、コンパイルで`<bits/stdc++.h>`周りのエラーが出る場合はg++でなくClangを使ってしまっていると思われます。見直してください。

a.outを実行してみます。`./a.out`です。`Hello World`と表示されたなら成功です。

次に、入力を受け取るコードを作成してみます。
C++では、cinから「引き出す」ような形で入力を受け取ることができます。

```cpp
#include <bits/stdc++.h>

using namespace std;

int main() {
    // 先に器だけ作っておく
    string name;
    // 名前を聞く(行末に改行をしないことでコロンの後ろに入力できる)
    cout << "Enter name :";
    // 入力の受け取り
    cin >> name;
    // 挨拶
    cout << "Hello, " << name << "!" << endl;
}
```

実行した途端に処理が止まるような感じになりますが、これは入力待ちです。名前を入れると挨拶をしてくれます。

うまく動きましたか?

## AtCoderの問題を解いてみる

では実際に問題を解いてみましょう。
競技プログラミングはオンラインで行われることが多いですが、その中でも[AtCoder](https://atcoder.jp/)上で行われることがほとんどです。AtCoderのアカウントにアクセスし、アカウントを作っておきましょう。

AtCoderではさまざまなコンテストが行われていますが、毎週土曜日に行われているAtCoder Beginner Contest、通称ABCから始めましょう。今回はキリがいいので[ABC 256](https://atcoder.jp/contests/abc256)のA問題(1問目)を解いてみます。

さて、コードをおいておく場所を作っておきましょう。間違って消してしまったり忘れてしまったりしない場所がいいです。WSLなら`~/AtCoder`、macなら`~/Documents/AtCoder`などのフォルダを作ってください。

これから色々なABCに参加することになるので、`~/AtCoder/abc256/a/main.cpp`とフォルダを分けて管理するのがお勧めです。main.cppを作成できたら[問題文](https://atcoder.jp/contests/abc256/tasks/abc256_a)を見てみましょう。

> Nが与えられます。2^Nを出力してください。

> 0 <= N <= 30
>
> Nは整数である

なるほど。色々解法はありますが、Nが30以下と小さいので、最もわかりやすい「2を真面目にN回掛ける」という方法で解いてみます。

たとえば、このように書くことができます。

```cpp
#include <bits/stdc++.h>

using namespace std;

int main() {
    int n;
    cin >> n; // 入力から一つとってきてnに流し込む感じ

    int result = 1; // 答え
    for(int i=0; i<n; i++) {
        result *= 2;
    }
    cout << result << endl;
}
```

<details>
<summary>別解1: pow()関数の利用</summary>

C++には、aのb乗を計算してくれるpow(a, b)関数があります。
これを利用すれば、ループなしで書くことができます。
(もちろん変数`result`に入れずに直接coutに入れても大丈夫です)

```cpp
#include <bits/stdc++.h>

using namespace std;

int main() {
    int n;
    cin >> n;
    int result = pow(2,n);
    cout << result << endl;
}
```

</details>

<details>
<summary>別解2: ビット演算の利用</summary>

C++では2進数での操作もできます。
この問題では2^Nを計算しなければならないのですが、これは1を2進数でN桁左にずらしたものです。

> `1`(10進数) = `00000001`(2進数)、<br>
> `2`(10進数) = `00000010`(2進数)、<br>
> `4`(10進数) = `00000100`(2進数)、<br>
> ... となります。

`a<<n`で、aを2進数と見てn桁左にずらしたものが得られます。
これを利用すれば、次のように書くことができます。

```cpp
#include <bits/stdc++.h>

using namespace std;

int main() {
    int n;
    cin >> n;
    int result = 1<<n;
    cout << result << endl;
}
```

</details>

実際にコンパイル→実行してみましょう。

問題文の下部にサンプルがあるので、3や30を入れてください。問題文と同じ結果になるはずです。

提出は問題下部の提出欄、または上部メニューの提出ボタンからできます。
言語をC++(GCC)にすることと、問題選択を間違えないように気をつけてください。

提出するとしばらくして結果が表示されます。
緑の「AC」なら正解ですが、それ以外なら残念ながら不正解です。コードを見直してみましょう。

> **結果一覧**
>
> AC : 正解
>
> WA : 答えが間違っている
>
> CE : コンパイルエラー プログラムの書き方が間違っていることが多い
>
> RE : ランタイムエラー プログラム実行中のエラー 配列の範囲などでミスしやすい
>
> TLE : 時間超過 制限時間で実行が終わらなかった

## まとめ

これでC++を使ってAtCoderの問題に取り組めるようになりました。

C++は何をするにもメモリアドレスが絡んでくる言語でとっつきづらいのですが、C++を知っているとWeb記事や模範解答、参考書などのコードが読めるようになるので、ぜひ慣れてほしいです。

デバッグのやり方やCLIの便利ツールなども紹介したいのですが、ある程度慣れてからでないと使いづらいので、別ページで解説する予定です。
